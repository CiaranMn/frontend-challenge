{"version":3,"sources":["assets/spinner.gif","lib/API.js","components/NavigationHeader.js","components/HelpModal.js","components/CalendarDay.js","components/CalendarGrid.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","API","this","baseUrl","getBookedDates","bind","changeDateStatus","startDate","endDate","moment","isValid","start","format","end","Promise","reject","dates","_this","attempt","arguments","length","undefined","fetch","concat","then","response","handleServerResponse","catch","err","parseError","dateToChange","newStatus","date","reservationData","_this2","method","headers","Content-Type","body","JSON","stringify","reserved","requestFunction","argsObject","status","message","resolve","json","error","init","NavigationHeader","_ref","prevText","centerText","nextText","handlePrevClicked","handleNextClicked","react_default","a","createElement","className","onClick","HelpModal","helpText","close","CalendarDay","isToday","isBooked","isDisabled","isSunday","handleClicked","mobile","CalendarGrid","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","checkSize","window","matchMedia","matches","state","setState","renderWeekDayHeader","map","day","key","mapAndRenderDates","_this$props","props","monthInView","today","monthStart","startOf","monthEnd","endOf","leadingSunday","trailingSaturday","isBefore","add","push","components_CalendarDay","dateClicked","isDateBooked","doDatesMatch","isAfter","firstDate","secondDate","isSame","booked","filter","bookedDate","requestChangeDateStatus","addEventListener","removeEventListener","React","Component","App","nMonthsBack","n","subtract","nMonthsForward","earliestDateChecked","loading","fetchSixMonthsBack","sixMonthsBack","requestBookedDates","toConsumableArray","payload","errMsg","showModalWithError","latestDateChecked","fetchSixMonthsForward","sixMonthsForward","newBookedStatus","showHelpModal","resp","ok","d","clearAndCloseModal","Date","_this$state","src_components_HelpModal","src","spinner","alt","src_components_NavigationHeader","CalendarGrid_CalendarGrid","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e28b7eca.chunk.js","sourcesContent":["module.exports = \"data:image/gif;base64,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\"","import moment from 'moment'\nimport 'whatwg-fetch'\nimport 'promise-polyfill/src/polyfill'\n\nexport default class API {\n\n  static init() {\n    this.baseUrl = \"http://localhost:3000\"\n    this.getBookedDates = this.getBookedDates.bind(this)\n    this.changeDateStatus = this.changeDateStatus.bind(this)\n  }\n\n  // expects requests for booked dates to enter via this method\n  // to provide validation of dates before passing onwards\n  static requestBookedDates(startDate, endDate) {\n    if (!moment(startDate).isValid() || !startDate) {\n      return Promise.reject('No valid start date for the request supplied.')\n    } \n    else if (!moment(endDate).isValid() || !endDate) {\n      return Promise.reject('No valid end date for the request supplied.')\n    } \n    else {\n      const start = moment(startDate).format('YYYY-MM-DD')\n      const end = moment(endDate).format('YYYY-MM-DD')\n      return this.getBookedDates({start, end})\n    }\n  }\n\n  // called if validations pass - attempt a fetch and pass the response\n  // to the generic response handler, with the function itself as callback\n  // in case further attempts need to be made following server failure.\n  // the arguments specific to this particular method are bundled in an object\n  // to allow the response handler to be agnostic as to what is calling it.\n  static getBookedDates(dates, attempt = 1) {\n    const {start, end} = dates\n    return fetch(this.baseUrl + `/reserved/${start}/${end}`)\n      .then(response => \n        this.handleServerResponse(\n          response, \n          this.getBookedDates, \n          dates, \n          attempt\n        )\n    ).catch(err => Promise.reject(this.parseError(err)))\n  }\n\n  // the same pattern is followed here - a validation and formatting gateway\n  static requestChangeDateStatus(dateToChange, newStatus) {\n    if (!moment(dateToChange).isValid()) {\n      return Promise.reject('The date supplied is not valid.')\n    } \n    else {\n      const date = moment(dateToChange).format('YYYY-MM-DD')\n      return this.changeDateStatus({\n        date,\n        newStatus\n      })\n    }\n  }\n\n  static changeDateStatus(reservationData, attempt = 1) {\n    const {date, newStatus} = reservationData\n    return fetch(this.baseUrl + `/reserved/${date}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        reserved: newStatus\n      })\n    }).then(response =>\n        this.handleServerResponse(\n          response,\n          this.changeDateStatus,\n          reservationData,\n          attempt\n       )\n    ).catch(err => Promise.reject(this.parseError(err)))\n  }\n\n  // this deals with the responses for both the get and put methods\n  static handleServerResponse(response, requestFunction, argsObject, attempt) {\n    if (response.status === 500) {\n      if (attempt >= 8) {\n        // At a 10% expected failure rate there's a 1 in 10mil chance of\n        // failing 7 times and user has been waiting 10s+ - give up for now.\n        return Promise.reject({message: 'Too many attempts'})\n      } else {\n        return requestFunction(argsObject, attempt + 1)\n      }\n    }\n    else if (response.status === 400) {\n      // date validation should not fail unless requestX methods are bypassed\n      return Promise.reject({message: 'Invalid date(s)'})\n    }\n    else {\n      return Promise.resolve(response.json())\n    }\n  }\n\n  // \n  static parseError(error) {\n    if (error.message === 'Failed to fetch') {\n      return \"Unable to connect to the server at the moment - please check your connection or try again in a few minutes.\"\n    } else if (error.message === 'Too many attempts') {\n      return \"The server is having some issues at the moment - please try again in a few minutes\"\n    } else if (error.message === 'Invalid date(s)') {\n      return \"Invalid dates were supplied to the server - if this keeps happening please contact support.\"\n    } else {\n      return \"Something's gone wrong - please try again in a few minutes. If this happens again, please contact support.\"\n    }\n  }\n\n}\n\nAPI.init()","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport './NavigationHeader.css'\n\nconst NavigationHeader = ({\n  prevText,\n  centerText,\n  nextText,\n  handlePrevClicked,\n  handleNextClicked\n}) => {\n\n  return (\n\n    <div className='nav-header'>\n\n      <div className='block-link prev' onClick={handlePrevClicked}>\n        &lt; {prevText}\n      </div>\n\n      <div className='center'>\n        {centerText}\n      </div>\n\n      <div className='block-link next' onClick={handleNextClicked}>\n        {nextText} &gt;\n      </div>\n    \n    </div>\n\n  )\n}\n\nexport default NavigationHeader\n\nNavigationHeader.propTypes = {\n  prevText: PropTypes.string.isRequired,\n  centerText: PropTypes.string.isRequired,\n  nextText: PropTypes.string.isRequired,\n  handlePrevClicked: PropTypes.func.isRequired,\n  handleNextClicked: PropTypes.func.isRequired\n}","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport './HelpModal.css'\n\nconst HelpModal = ({helpText, close}) => {\n\n  return (\n    <div className='modal'>\n\n      <span className=\"close\" onClick={close}>&times;</span>\n      <div className='modal-content'>\n        {helpText}\n      </div>\n\n    </div>\n  )\n}\n\nexport default HelpModal\n\nHelpModal.propTypes = {\n  helpText: PropTypes.string.isRequired,\n  close: PropTypes.func.isRequired\n}","import React from 'react'\nimport moment from 'moment'\nimport PropTypes from 'prop-types'\n\nconst CalendarDay = ({\n  isToday, \n  isBooked, \n  isDisabled, \n  isSunday,\n  date, \n  handleClicked,\n  mobile\n}) => {\n\n  return (\n          // disabled days are those leading and trailing days outside\n          // of the current month - don't do anything on clicking them.\n          // Sundays in the current month will be let through to be caught\n          // in App.js and a help modal displayed.\n    <div onClick={() => !isDisabled && handleClicked(date)}\n      className={\n        'calendar-day grid-cell '\n        + (isToday && ' today ')\n        + (isBooked && ' booked ')\n        + (!isBooked && !isDisabled && !isSunday && ' unbooked ') \n        + (isDisabled && ' disabled ')\n        + (isSunday && ' sunday ')\n     }>\n      {mobile\n        ?\n        moment(date).format('ddd D MMM YYYY')\n        :\n        moment(date).date()\n      }\n    </div>\n  )\n}\n\nexport default CalendarDay\n\nCalendarDay.propTypes = {\n  isToday: PropTypes.bool.isRequired,\n  isBooked: PropTypes.bool.isRequired,\n  isDisabled: PropTypes.bool.isRequired,\n  isSunday: PropTypes.bool.isRequired,\n  mobile: PropTypes.bool.isRequired,\n  date: PropTypes.oneOfType([\n    PropTypes.instanceOf(Date),\n    PropTypes.instanceOf(moment)\n  ]).isRequired,\n  handleClicked: PropTypes.func.isRequired,\n\n}\n","import React from 'react'\nimport moment from 'moment'\nimport PropTypes from 'prop-types'\n\nimport CalendarDay from './CalendarDay'\nimport './CalendarGrid.css'\n\nexport default class CalendarGrid extends React.Component {\n\n  constructor() {\n    super()\n    const mobile = window.matchMedia(\"screen and (max-width: 600px)\").matches\n    this.state = ({ mobile })\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.checkSize)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.checkSize)\n  }\n\n  checkSize = () => {\n    const mobile = window.matchMedia(\"screen and (max-width: 600px)\").matches\n    if (this.state.mobile !== mobile) {\n      this.setState({\n        mobile\n      })\n    }\n  }\n\n  renderWeekDayHeader = () => {\n    return [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\n      .map(day =>\n        <div className='week-day-header grid-cell' key={day}>\n          {day}\n        </div>\n    )\n  }\n\n  mapAndRenderDates = () => {\n    const {monthInView, today} = this.props \n    const { mobile } = this.state\n    let dates = []\n\n    const monthStart = moment(monthInView).startOf('month')\n    const monthEnd = moment(monthInView).endOf('month')\n    const leadingSunday = moment(monthStart).startOf('week')\n    const trailingSaturday = moment(monthEnd).endOf('week')\n    // we will only show the few days either side of the month\n    // on a non-mobile browser\n    for (\n      let date = moment(mobile ? monthStart : leadingSunday);\n      date.isBefore(mobile ? monthEnd : trailingSaturday); \n      date.add(1, 'days')\n    ) {\n      dates.push(moment(date))\n    }\n    return dates.map(date => \n      <CalendarDay \n        date={date}\n        key={date}\n        handleClicked={this.dateClicked}\n        mobile={mobile}\n        isSunday={date.day() === 0}\n        isBooked={!!this.isDateBooked(date)}\n        isToday={!!this.doDatesMatch(date, today)}\n        isDisabled={\n          moment(date).isBefore(monthStart) \n          || \n          moment(date).isAfter(monthEnd)\n        }\n       />\n      )\n  }\n\n  doDatesMatch = (firstDate, secondDate) => {\n    return moment(firstDate).isSame(secondDate, 'day')\n  }\n\n  isDateBooked = date => {\n    const { booked } = this.props\n    return !!booked.filter(bookedDate =>\n      this.doDatesMatch(bookedDate, date)\n    )[0]\n  }\n\n  dateClicked = date => {\n    this.props.requestChangeDateStatus(\n      date, \n      !this.isDateBooked(date)  // API expects true or false for new status\n    )\n  }\n\n  render() {\n\n    const {mobile} = this.state\n\n    return (\n\n      <div className='calendar-grid'>\n        {!mobile ? this.renderWeekDayHeader() : null}\n        {this.mapAndRenderDates()}\n      </div>\n\n    )\n  }\n}\n\nCalendarGrid.propTypes = {\n  monthInView: PropTypes.oneOfType([\n    PropTypes.instanceOf(Date),\n    PropTypes.instanceOf(moment)\n  ]).isRequired,\n  today: PropTypes.oneOfType([\n    PropTypes.instanceOf(Date), \n    PropTypes.instanceOf(moment)\n  ]).isRequired,\n  booked: PropTypes.array.isRequired,\n  requestChangeDateStatus: PropTypes.func.isRequired\n}","import React from 'react'\nimport moment from 'moment'\n\nimport './App.css'\nimport spinner from './assets/spinner.gif'\nimport API from './lib/API'\nimport NavigationHeader from './components/NavigationHeader'\nimport HelpModal from './components/HelpModal'\nimport CalendarGrid from './components/CalendarGrid'\n\nclass App extends React.Component {\n\n  constructor() {\n    super()\n    const today = new Date()\n    const monthInView = today\n    this.state = {\n      today,\n      monthInView,\n      showHelpModal: false,\n      loading: false,\n      booked: []\n    }\n  }\n\n  componentDidMount() {\n    const {today} = this.state\n    const sixMonthsBack = this.nMonthsBack(today, 6)\n    const sixMonthsForward = this.nMonthsForward(today, 6)\n\n    // get a decent range in the first fetch - we will fetch\n    // again when the user approaches the end of the range,\n    // checking in the handleNextClick/prevClick methods\n    this.setState({ loading: true })\n    API.requestBookedDates(sixMonthsBack, sixMonthsForward)\n      .then(response => \n        this.setState({\n          booked: response.payload,\n          earliestDateChecked: sixMonthsBack,\n          latestDateChecked: sixMonthsForward,\n          loading: false \n        })\n      )\n      .catch(errMsg => this.showModalWithError(errMsg))\n  }\n\n  nMonthsBack = (date, n) => {\n    return moment(date).subtract(n, 'month').startOf('month')\n  }\n\n  nMonthsForward = (date, n) => {\n    return moment(date).add(n, 'month').endOf('month')\n  }\n\n  handlePrevClicked = () => {\n    const { earliestDateChecked } = this.state\n    const monthInView = moment(this.state.monthInView).subtract(1, 'month')\n\n    // Check if user has overtaken data and show loading indicator if so\n    const loading = moment(monthInView).isBefore(earliestDateChecked)\n    this.setState({ \n      monthInView, \n      loading \n    }, () => {   // if user is approaching or beyond fetched data, get more\n      if (moment(monthInView).subtract(3, 'month')\n          .isBefore(earliestDateChecked)) {\n            this.fetchSixMonthsBack()\n        }\n    })\n  }\n\n  fetchSixMonthsBack = () => {\n    let { earliestDateChecked } = this.state\n    if (!earliestDateChecked) {   // in case initial fetch failed\n      earliestDateChecked = moment().endOf('month') \n    }\n    const sixMonthsBack = this.nMonthsBack(earliestDateChecked, 6)\n    API.requestBookedDates(sixMonthsBack, earliestDateChecked)\n      .then(response => {\n        this.setState({\n          booked: [...response.payload, ...this.state.booked],\n          earliestDateChecked: sixMonthsBack,\n          loading: false  // we may have set loading true in handlePrevClicked\n        })\n      })\n      .catch(errMsg => this.showModalWithError(errMsg))\n  }\n\n  handleNextClicked = () => {\n    const { latestDateChecked }= this.state\n    const monthInView = moment(this.state.monthInView).add(1, 'month')\n    const loading = moment(monthInView).isAfter(latestDateChecked)\n    this.setState({ \n      monthInView, \n      loading \n    }, () => {\n      if (moment(monthInView).add(3, 'month').isAfter(latestDateChecked)) {\n        this.fetchSixMonthsForward()\n      }\n    })\n  }\n  \n  fetchSixMonthsForward = () => {\n    let { latestDateChecked } = this.state\n    if (!latestDateChecked) {   // in case initial fetch failed\n      latestDateChecked = moment().endOf('month')\n    }\n    const sixMonthsForward = this.nMonthsForward(latestDateChecked, 6)\n    API.requestBookedDates(latestDateChecked, sixMonthsForward)\n      .then(response => {\n        this.setState({\n          booked: [...this.state.booked, ...response.payload],\n          latestDateChecked: sixMonthsForward,\n          loading: false\n        })\n      })\n      .catch(errMsg => this.showModalWithError(errMsg))\n  }\n\n  requestChangeDateStatus = (date, newBookedStatus) => {\n    if (date.day() === 0) { \n      return this.setState({\n        showHelpModal: true,\n        helpText: \"Sorry, you aren't able to change the booking status of Sundays.\"\n      })\n    } \n    this.setState({ loading: true }, () => {\n      API.requestChangeDateStatus(date, newBookedStatus)\n        .then(resp => {\n          if (!!resp.ok) {\n            let booked = newBookedStatus ? // has it been booked or unbooked?\n              [...this.state.booked, date.format()]\n              :\n              this.state.booked.filter(d => !moment(d).isSame(date, 'day'))\n            this.setState({\n              booked,\n              loading: false\n            })\n          }\n      }).catch(errMsg => this.showModalWithError(errMsg))\n    })\n  }\n\n  showModalWithError = errMsg => {\n    this.setState({\n      showHelpModal: true,\n      helpText: errMsg,\n      loading: false,\n    })\n  }\n\n  clearAndCloseModal = () => {\n    this.setState({\n      showHelpModal: false,\n      helpText: ''\n    })\n  }\n\n  render() {\n\n    const {\n      monthInView, \n      booked, \n      today, \n      loading,\n      showHelpModal, \n      helpText\n    } = this.state\n\n    return (\n      <div className=\"app\">\n\n        {showHelpModal && \n          <HelpModal \n            helpText={helpText}\n            close={this.clearAndCloseModal}\n          />\n        }\n\n        {loading && \n          <img src={spinner} className=\"spinner\" alt=\"loading indicator\"/>\n        }\n\n        <header className=\"app-header\">\n          Spare Room\n        </header>\n\n        <div className=\"main-container\">\n          <NavigationHeader\n            prevText={\n              moment(monthInView).subtract(1, 'month').format('MMM YYYY')\n            }\n            centerText={\n              moment(monthInView).format('MMMM YYYY')\n            }\n            nextText={\n              moment(monthInView).add(1, 'month').format('MMM YYYY')\n            }\n            handlePrevClicked={this.handlePrevClicked}\n            handleNextClicked={this.handleNextClicked}\n          />\n          <CalendarGrid \n            monthInView={monthInView}\n            booked={booked}\n            today={today}\n            requestChangeDateStatus={this.requestChangeDateStatus}\n          />\n        </div>\n        \n      </div>\n\n    )\n  }\n}\n\nexport default App","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}